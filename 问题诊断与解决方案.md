# 前后端连接问题诊断与解决方案

## 问题描述

您遇到的问题是：后端和前端服务都已启动，但无法正常打开网页。

## 问题分析

### 1. 服务状态检查

根据您的输出信息：

**后端服务**：
```bash
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
```
✅ 后端服务正常启动在端口8000

**前端服务**：
```bash
Port 3000 is in use, trying another one...
➜  Local:   http://localhost:3001/
```
✅ 前端服务正常启动在端口3001

### 2. 可能的问题原因

1. **浏览器缓存问题**
2. **CORS跨域问题**
3. **网络连接问题**
4. **防火墙阻止**
5. **端口被占用**

## 解决方案

### 方案1：浏览器访问测试

请按以下步骤测试：

1. **打开浏览器**，访问以下地址：
   - 前端应用：`http://localhost:3001`
   - 后端API文档：`http://localhost:8000/docs`
   - 后端根路径：`http://localhost:8000`

2. **清除浏览器缓存**：
   - 按 `Ctrl + Shift + R` 强制刷新
   - 或按 `F12` 打开开发者工具，右键刷新按钮选择"清空缓存并硬性重新加载"

### 方案2：使用测试页面

我已经创建了一个测试页面 `test_frontend.html`，请：

1. 双击打开 `test_frontend.html` 文件
2. 页面会自动测试前后端连接状态
3. 点击测试按钮进行手动测试

### 方案3：命令行测试

在PowerShell中运行以下命令：

```powershell
# 测试后端连接
Invoke-WebRequest -Uri "http://localhost:8000" -UseBasicParsing

# 测试前端连接
Invoke-WebRequest -Uri "http://localhost:3001" -UseBasicParsing

# 测试API文档
Invoke-WebRequest -Uri "http://localhost:8000/docs" -UseBasicParsing
```

### 方案4：检查端口占用

```powershell
# 检查8000端口
netstat -an | findstr :8000

# 检查3001端口
netstat -an | findstr :3001
```

### 方案5：重启服务

如果上述方法都不行，请重启服务：

**重启后端**：
```bash
# 在backend目录下
cd backend
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

**重启前端**：
```bash
# 在frontend目录下
cd frontend
npm run dev
```

## 常见问题解决

### 问题1：浏览器显示"无法访问此网站"

**解决方案**：
1. 确认服务是否正在运行
2. 检查防火墙设置
3. 尝试使用 `127.0.0.1` 替代 `localhost`

### 问题2：CORS错误

**解决方案**：
后端已经配置了CORS中间件，如果仍有问题，请检查：
1. 浏览器控制台是否有CORS错误
2. 确认后端CORS配置是否正确

### 问题3：端口被占用

**解决方案**：
```powershell
# 查找占用端口的进程
netstat -ano | findstr :8000
netstat -ano | findstr :3001

# 终止进程（替换PID为实际进程ID）
taskkill /PID <PID> /F
```

### 问题4：数据库连接问题

**解决方案**：
1. 确认MySQL服务正在运行
2. 检查数据库连接配置
3. 确认数据库 `test_assessment` 存在

## 验证步骤

### 步骤1：基础连接测试

1. 打开浏览器访问 `http://localhost:3001`
2. 应该看到"人才测评平台"页面
3. 如果看到页面，说明前端正常

### 步骤2：API测试

1. 访问 `http://localhost:8000/docs`
2. 应该看到FastAPI的自动生成文档
3. 如果看到文档，说明后端正常

### 步骤3：功能测试

1. 在前端页面尝试登录功能
2. 检查浏览器控制台是否有错误信息
3. 确认前后端通信正常

## 调试技巧

### 1. 浏览器开发者工具

按 `F12` 打开开发者工具：
- **Console标签**：查看JavaScript错误
- **Network标签**：查看网络请求
- **Application标签**：查看存储和缓存

### 2. 后端日志

观察后端控制台输出：
- 查看是否有错误信息
- 确认API请求是否到达后端
- 检查数据库连接状态

### 3. 前端日志

观察前端控制台输出：
- 查看Vite开发服务器状态
- 确认热重载是否正常工作
- 检查构建错误

## 预期结果

成功启动后，您应该能够：

1. **访问前端**：`http://localhost:3001` 显示React应用
2. **访问后端API文档**：`http://localhost:8000/docs` 显示API文档
3. **前后端通信**：前端能够正常调用后端API

## 如果问题仍然存在

如果按照上述步骤仍然无法解决问题，请：

1. **收集错误信息**：
   - 浏览器控制台错误
   - 后端控制台错误
   - 网络请求状态

2. **检查系统环境**：
   - Node.js版本：`node --version`
   - Python版本：`python --version`
   - 包管理器版本：`npm --version`

3. **重新安装依赖**：
   ```bash
   # 前端
   cd frontend
   rm -rf node_modules package-lock.json
   npm install

   # 后端
   cd backend
   pip install -r requirements.txt
   ```

4. **联系技术支持**：提供详细的错误信息和环境信息

## 总结

大多数情况下，这个问题是由于：
- 浏览器缓存
- 网络连接问题
- 服务未完全启动

按照上述步骤逐一排查，应该能够解决问题。如果仍有问题，请提供具体的错误信息，我会进一步协助您解决。 